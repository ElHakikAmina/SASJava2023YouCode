DELIMITER //
CREATE TRIGGER decrement_quantity_after_delete
AFTER DELETE ON isbn
FOR EACH ROW
BEGIN
    UPDATE livre
    SET quantite = quantite - 1
    WHERE id IN (SELECT id_livre FROM isbn WHERE ISBN = OLD.ISBN);
END;
//
DELIMITER ;



  create  database bibliotheque;

use bibliotheque;

create table  emprunt_livre(
id int primary key auto_increment,
livre_ISBN varchar(255),
id_emprunteur int,
Date_emprunt date,
Date_retour date,
FOREIGN KEY (id_emprunteur) REFERENCES emprunteur(id),
FOREIGN KEY (livre_ISBN) REFERENCES isbn(ISBN)
);

-- Cr√©ation de la table "isbn"
 create table emprunteur (
 id int primary key auto_increment,
 nom_complet varchar (255),
 numTel varchar (255),
 adresse varchar (255)
 );

create table livre (
id int primary key auto_increment,
titre varchar (255),
auteur varchar (255),
quantite int 
);

CREATE TABLE isbn (
    ISBN VARCHAR(255) PRIMARY KEY,
    status VARCHAR(255),
    id_livre INT,
    FOREIGN KEY (id_livre) REFERENCES livre(id)
);